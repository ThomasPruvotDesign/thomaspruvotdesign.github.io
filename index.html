<!DOCTYPE html>
<html lang="fr">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Portfolio PDF</title>
  <style>
    body {
      margin: 0;
      padding: 0;
      /* Fond de la page */
      background-image: url('Boisbrule.png');
      background-size: cover;
      background-position: center;
      background-repeat: no-repeat;
      /* Autorise le défilement vertical pour plusieurs pages */
      overflow-y: auto;
      display: flex;
      justify-content: center;
      align-items: flex-start;
      min-height: 100vh;
    }
    /* Conteneur qui accueille toutes les pages du PDF */
    #pdf-container {
      width: 80%;
      max-width: 1200px;
      margin: 20px auto;
      background: rgba(255,255,255,0.8);
      padding: 10px;
    }
    /* Chaque canvas occupe 100% de la largeur du conteneur,
       la hauteur s'ajuste automatiquement pour préserver le ratio */
    canvas {
      display: block;
      margin: 10px auto;
      width: 100%;
      height: auto;
    }
    @media (max-width: 768px) {
      #pdf-container {
        width: 95%;
      }
    }
  </style>
</head>
<body>
  <div id="pdf-container"></div>

  <!-- Inclusion de PDF.js via CDN -->
  <script src="https://cdnjs.cloudflare.com/ajax/libs/pdf.js/2.10.377/pdf.min.js"></script>
  <script>
    const url = 'Portfolio.pdf';
    const container = document.getElementById('pdf-container');
    let pdfDoc = null;

    // Fonction qui rend toutes les pages du PDF
    function renderPDF() {
      // On vide le conteneur pour éviter les doublons
      container.innerHTML = '';

      // Chargement du document PDF
      pdfjsLib.getDocument(url).promise.then(function(pdf) {
        pdfDoc = pdf;
        // Pour chaque page...
        for (let i = 1; i <= pdf.numPages; i++) {
          // Obtenir la page
          pdf.getPage(i).then(function(page) {
            // Récupérer le viewport de la page à échelle 1 (taille native)
            const initialViewport = page.getViewport({ scale: 1 });
            // On calcule le facteur d'échelle pour que la page s'adapte à la largeur du conteneur
            const containerWidth = container.clientWidth;
            const scale = containerWidth / initialViewport.width;
            // On crée un viewport avec le facteur calculé
            const viewport = page.getViewport({ scale: scale });
            // Création du canvas pour la page
            const canvas = document.createElement('canvas');
            const context = canvas.getContext('2d');
            canvas.width = viewport.width;
            canvas.height = viewport.height;
            // Ajouter le canvas au conteneur
            container.appendChild(canvas);
            // Rendu de la page dans le canvas
            page.render({
              canvasContext: context,
              viewport: viewport
            });
          });
        }
      }).catch(function(error) {
        console.error('Erreur lors du chargement du PDF : ', error);
      });
    }

    // Rendu initial du PDF
    renderPDF();

    // Re-rendu automatique lors du redimensionnement de la fenêtre
    window.addEventListener('resize', function() {
      renderPDF();
    });
  </script>
</body>
</html>